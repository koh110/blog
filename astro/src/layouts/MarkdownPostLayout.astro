---
import type { CollectionEntry } from 'astro:content'
import '../styles/global.css'
import Layout from './Layout.astro'
import Ga from '../components/ga.astro'
import TweetButton from '../components/TweetButton.astro'
import { createDescription } from '../lib/post'

export type Props = {
  post: CollectionEntry<'blog'>
  prev: CollectionEntry<'blog'> | null
  next: CollectionEntry<'blog'> | null
}

const { post, prev, next } = Astro.props
const description = createDescription(post)

---

<Layout title={post.data.title} description={description}>
  <script
    src="https://b.st-hatena.com/js/bookmark_button.js"
    type="text/javascript"
    async
  />
  <main>
    <header>
      <h3><a href="/">kohsweblog</a></h3>
    </header>
    <h1>{post.data.title}</h1>
    <time>{post.data.date}</time>
    <div class="social">
      <TweetButton />
      <a
        href = "https://b.hatena.ne.jp/entry/"
        class="hatena-bookmark-button"
        data-hatena-bookmark-layout="basic-label-counter"
        data-hatena-bookmark-lang="ja"
        data-hatena-bookmark-height="28"
        title="このエントリーをはてなブックマークに追加"
      >
        <img src="https://b.st-hatena.com/images/v4/public/entry-button/button-only@2x.png"
          alt="このエントリーをはてなブックマークに追加"
          width="20"
          height="20"
          style="border: none;"
        />
      </a>
    </div>
    <slot />
    <hr>
    <ul class="post-selector">
     {prev && <li><a rel="prev" href={`/${prev.slug}`}> ← {prev.data.title}</a></li>}
     {next && <li><a rel="next" href={`/${next.slug}`}>{next.data.title} → </a></li>}
    </ul>
  </main>
</Layout>

<style>
  main {
    margin: auto;
    padding: 1.5rem;
    max-width: 50em;
  }
  .social {
    margin: 1em 0 0 0;
  }
  .post-selector {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style: none;
    padding: 0px;
  }
  hr {
    margin: 4em 0 4em 0;
  }
</style>